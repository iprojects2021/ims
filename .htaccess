# Prevent directory listing
Options -Indexes

# Block direct access to files (e.g., .pdf, .txt, .mp4) â€” images are removed
<FilesMatch "\.(pdf|txt|mp4)$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

# Redirect file requests (excluding images) to download.php
RewriteEngine On
RewriteCond %{REQUEST_URI} \.(pdf|txt|mp4)$ [NC]
RewriteRule ^(.*)$ /download.php?file=$1 [L]

# =========================
# Hide .php extension
# =========================

# 1. Redirect direct .php access to clean URL (avoid duplicate content)
RewriteCond %{THE_REQUEST} \s/([^\s]+)\.php[?\s] [NC]
RewriteRule ^ /%1 [R=301,L]

# 2. Internally rewrite clean URLs to .php files if they exist
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]


